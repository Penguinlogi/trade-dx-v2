# 貿易DX V2.1 Webアプリ - 全体進捗管理書

## プロジェクト情報
- **プロジェクト名**: 貿易DX管理システム Webアプリケーション版
- **バージョン**: V2.1 Web
- **開始日**: 2025-11-21
- **予定完了日**: 2025-12-20 (4週間)

## 進捗サマリー
- **現在フェーズ**: Phase 1 準備中
- **全体進捗**: 0% (0/9 フェーズ完了)
- **最終更新**: 2025-11-21

---

## Phase 1: 環境構築とデータベース設計 (3日)
**ステータス**: 🔄 進行中  
**開始日**: 2025-11-21  
**完了日**: -

### Day 1: プロジェクト初期化
- [x] ディレクトリ構造の作成
- [ ] バックエンド初期化
  - [ ] FastAPI プロジェクト作成
  - [ ] requirements.txt 作成
  - [ ] main.py 作成
  - [ ] config.py 作成
- [ ] フロントエンド初期化
  - [ ] React + Vite プロジェクト作成
  - [ ] package.json 設定
  - [ ] TypeScript 設定
  - [ ] ESLint/Prettier 設定
- [ ] Docker環境構築
  - [ ] docker-compose.yml 作成
  - [ ] Dockerfile (backend)
  - [ ] Dockerfile (frontend)

### Day 2: データベース設計
- [ ] ER図の作成
- [ ] テーブル定義
  - [ ] users (ユーザー)
  - [ ] customers (顧客マスタ)
  - [ ] products (商品マスタ)
  - [ ] cases (案件)
  - [ ] change_history (変更履歴)
  - [ ] case_numbers (案件番号管理)
  - [ ] backups (バックアップ履歴)
- [ ] SQLAlchemy モデル作成
- [ ] Alembic マイグレーション設定

### Day 3: データベース実装とマイグレーション
- [ ] 初期マイグレーションファイル作成
- [ ] マイグレーション実行
- [ ] シードデータ作成
- [ ] テストデータ投入スクリプト

### 成果物
- [x] ディレクトリ構造
- [ ] バックエンド初期環境
- [ ] フロントエンド初期環境
- [ ] Docker環境
- [ ] データベーススキーマ

---

## Phase 2: 認証機能 (2日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### Day 1: バックエンド認証
- [ ] JWT認証の実装
  - [ ] auth/jwt.py 作成
  - [ ] パスワードハッシュ化 (bcrypt)
  - [ ] トークン生成・検証
- [ ] 認証エンドポイント
  - [ ] POST /api/auth/login
  - [ ] POST /api/auth/logout
  - [ ] GET /api/auth/me
  - [ ] POST /api/auth/refresh
- [ ] 認証ミドルウェア

### Day 2: フロントエンド認証
- [ ] ログイン画面の作成
- [ ] AuthContext 作成
- [ ] Private Route 作成
- [ ] トークンストレージ
- [ ] 自動ログアウト機能

### 成果物
- [ ] JWT認証システム
- [ ] ログイン画面
- [ ] 認証状態管理

---

## Phase 3: 案件管理API (4日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### Day 1: 案件CRUD - バックエンド
- [ ] 案件モデルの実装
- [ ] 案件APIエンドポイント
  - [ ] GET /api/cases (一覧取得)
  - [ ] GET /api/cases/{id} (詳細取得)
  - [ ] POST /api/cases (新規作成)
  - [ ] PUT /api/cases/{id} (更新)
  - [ ] DELETE /api/cases/{id} (削除)
- [ ] フィルタリング・検索機能

### Day 2: 案件CRUD - フロントエンド
- [ ] 案件一覧画面
- [ ] データテーブルコンポーネント
- [ ] ページネーション
- [ ] ソート機能
- [ ] フィルター・検索フォーム

### Day 3: 案件フォーム
- [ ] 新規案件作成モーダル
- [ ] 案件編集モーダル
- [ ] フォームバリデーション
- [ ] エラーハンドリング

### Day 4: 案件番号自動生成
- [ ] 案件番号生成ロジック移植
- [ ] POST /api/case-numbers/generate
- [ ] 連番管理テーブル

### 成果物
- [ ] 案件管理API
- [ ] 案件一覧画面
- [ ] 案件登録・編集フォーム
- [ ] 案件番号自動生成機能

---

## Phase 4: マスタ管理 (3日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### Day 1: 顧客マスタ
- [ ] 顧客マスタAPI
- [ ] 顧客マスタ画面
- [ ] 登録・編集フォーム

### Day 2: 商品マスタ
- [ ] 商品マスタAPI
- [ ] 商品マスタ画面
- [ ] 登録・編集フォーム

### Day 3: マスタ連携
- [ ] 案件フォームでの顧客選択
- [ ] 案件フォームでの商品選択
- [ ] オートコンプリート機能

### 成果物
- [ ] 顧客マスタ管理機能
- [ ] 商品マスタ管理機能
- [ ] マスタ連携機能

---

## Phase 5: ダッシュボード・集計機能 (2日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### Day 1: 集計API
- [ ] GET /api/analytics/summary
- [ ] GET /api/analytics/trends
- [ ] GET /api/analytics/by-customer

### Day 2: ダッシュボード画面
- [ ] サマリーカード
- [ ] 案件ステータス分布
- [ ] 月次トレンドグラフ
- [ ] 顧客別売上TOP10

### 成果物
- [ ] 集計API
- [ ] ダッシュボード画面

---

## Phase 6: ドキュメント生成機能 (3日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### Day 1: Invoice生成
- [ ] POST /api/documents/invoice
- [ ] Excelテンプレート管理
- [ ] Excel生成ロジック

### Day 2: Packing List生成
- [ ] POST /api/documents/packing-list
- [ ] テンプレート管理
- [ ] ドキュメント履歴管理

### Day 3: フロントエンド統合
- [ ] ドキュメント生成ボタン
- [ ] プレビュー機能
- [ ] ダウンロード機能

### 成果物
- [ ] Invoice生成機能
- [ ] Packing List生成機能
- [ ] ドキュメント管理画面

---

## Phase 7: 変更履歴・バックアップ (2日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### Day 1: 変更履歴機能
- [ ] 変更履歴記録ミドルウェア
- [ ] GET /api/change-history
- [ ] 変更履歴画面
- [ ] 差分表示機能

### Day 2: バックアップ機能
- [ ] POST /api/backups/create
- [ ] GET /api/backups
- [ ] バックアップ自動作成
- [ ] 復元機能

### 成果物
- [ ] 変更履歴機能
- [ ] バックアップ管理機能

---

## Phase 8: リアルタイム同期・通知 (1日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### タスクリスト
- [ ] WebSocket セットアップ
- [ ] リアルタイム更新通知
- [ ] サーバー状態表示
- [ ] 最終同期時刻表示
- [ ] オンラインユーザー表示

### 成果物
- [ ] WebSocket通信
- [ ] リアルタイム更新機能

---

## Phase 9: テストとデバッグ (2日)
**ステータス**: ⬜ 未着手  
**開始日**: -  
**完了日**: -

### Day 1: バックエンドテスト
- [ ] pytest セットアップ
- [ ] API単体テスト
- [ ] 統合テスト
- [ ] カバレッジレポート

### Day 2: フロントエンドテスト
- [ ] Vitest セットアップ
- [ ] コンポーネントテスト
- [ ] E2Eテスト (Playwright)
- [ ] エラーハンドリング確認

### 成果物
- [ ] テストスイート
- [ ] テストカバレッジレポート

---

## 全体進捗
- Phase 1: 🔄 10% (環境構築中)
- Phase 2: ⬜ 0%
- Phase 3: ⬜ 0%
- Phase 4: ⬜ 0%
- Phase 5: ⬜ 0%
- Phase 6: ⬜ 0%
- Phase 7: ⬜ 0%
- Phase 8: ⬜ 0%
- Phase 9: ⬜ 0%

**合計進捗: 0/9 (0%)**

---

## マイルストーン

### Week 1 (2025-11-21 ~ 2025-11-27)
- [ ] Phase 1: 環境構築とDB設計 完了
- [ ] Phase 2: 認証機能 完了

### Week 2 (2025-11-28 ~ 2025-12-04)
- [ ] Phase 3: 案件管理API 完了
- [ ] Phase 4: マスタ管理 完了

### Week 3 (2025-12-05 ~ 2025-12-11)
- [ ] Phase 5: ダッシュボード 完了
- [ ] Phase 6: ドキュメント生成 完了
- [ ] Phase 7: 変更履歴・バックアップ 完了

### Week 4 (2025-12-12 ~ 2025-12-20)
- [ ] Phase 8: リアルタイム機能 完了
- [ ] Phase 9: テストとデバッグ 完了
- [ ] 本番環境への展開準備

---

## 技術スタック

### フロントエンド
- React 18 + TypeScript
- Vite
- Material-UI (MUI)
- React Query
- React Hook Form + Zod
- Axios

### バックエンド
- FastAPI (Python 3.11+)
- SQLAlchemy 2.0
- PostgreSQL 15+ / SQLite (開発用)
- Pydantic V2
- JWT認証

### インフラ
- Docker Compose
- Nginx (オプション)

---

## Git管理
- [ ] Git初期化
- [ ] .gitignore 作成
- [ ] README.md 作成
- [ ] 初回コミット

---

## 備考
- 既存のExcelベースシステムは `legacy/` に保管済み
- Phase 2の案件番号生成ロジックはバックエンドAPIに移植予定
- Phase 3-4のバックアップ・競合解決ロジックは変更履歴機能に統合予定

