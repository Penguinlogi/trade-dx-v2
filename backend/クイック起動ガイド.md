# バックエンドサーバー クイック起動ガイド

## 🚀 最も簡単な起動方法

### 方法1: 簡易起動スクリプト（推奨）

```batch
cd backend
start_simple.bat
```

これだけです！仮想環境のPythonを直接使用するため、確実に動作します。

---

## 📋 手動起動（確実な方法）

もしスクリプトで問題が発生する場合は、以下の手順を手動で実行してください：

### ステップ1: バックエンドディレクトリに移動
```batch
cd backend
```

### ステップ2: 仮想環境のPythonを直接使用
```batch
venv\Scripts\python.exe -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**これだけです！** 仮想環境をアクティベートする必要はありません。

---

## ⚠️ よくある問題と解決方法

### 問題1: `venv\Scripts\python.exe` が見つからない

**解決方法**: 仮想環境を作成してください
```batch
cd backend
python -m venv venv
venv\Scripts\python.exe -m pip install --upgrade pip
venv\Scripts\python.exe -m pip install -r requirements.txt
```

### 問題2: `ModuleNotFoundError: No module named 'fastapi'`

**解決方法**: 必要なライブラリをインストールしてください
```batch
cd backend
venv\Scripts\python.exe -m pip install -r requirements.txt
```

### 問題3: ポート8000が既に使用されている

**解決方法1**: 既存のサーバーを停止
- タスクマネージャーで `python.exe` または `uvicorn` プロセスを終了

**解決方法2**: 別のポートを使用
```batch
venv\Scripts\python.exe -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8001
```

---

## ✅ 正常に起動した場合

以下のメッセージが表示されれば成功です：

```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [xxxxx] using WatchFiles
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

### アクセスURL
- **サーバー**: http://localhost:8000
- **API ドキュメント**: http://localhost:8000/docs
- **代替API ドキュメント**: http://localhost:8000/redoc

---

## 🔧 トラブルシューティング

### スクリプトが途中で止まる

`start_server.bat`が途中で止まる場合は、`start_simple.bat`を使用してください。

### 仮想環境のアクティベートでエラーが出る

仮想環境をアクティベートする必要はありません。`venv\Scripts\python.exe`を直接使用してください。

### 毎回同じエラーが出る

以下のコマンドで環境をリセットしてください：

```batch
cd backend
rmdir /s /q venv
python -m venv venv
venv\Scripts\python.exe -m pip install --upgrade pip
venv\Scripts\python.exe -m pip install -r requirements.txt
```

---

## 💡 推奨ワークフロー

1. **初回セットアップ時のみ**:
   ```batch
   cd backend
   python -m venv venv
   venv\Scripts\python.exe -m pip install -r requirements.txt
   ```

2. **日常的な起動**:
   ```batch
   cd backend
   start_simple.bat
   ```

または

```batch
cd backend
venv\Scripts\python.exe -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

---

## 📝 メモ

- 仮想環境をアクティベート（`activate.bat`）する必要はありません
- `venv\Scripts\python.exe`を直接使用することで、確実に仮想環境のPythonが使われます
- これにより、環境変数の問題やパスの問題を回避できます
