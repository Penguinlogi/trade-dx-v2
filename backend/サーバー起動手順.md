# バックエンドサーバー起動手順

## エラー: `ModuleNotFoundError: No module named 'fastapi'`

このエラーは、仮想環境がアクティベートされていないか、必要なパッケージがインストールされていない場合に発生します。

## 解決方法

### 方法1: start_server.batを使用（推奨）

```batch
cd backend
start_server.bat
```

このスクリプトは以下を自動で実行します：
1. 仮想環境のアクティベート
2. 必要なライブラリの確認・インストール
3. サーバーの起動

### 方法2: 手動で仮想環境をアクティベート

#### ステップ1: バックエンドディレクトリに移動
```batch
cd backend
```

#### ステップ2: 仮想環境をアクティベート
```batch
venv\Scripts\activate.bat
```

**注意**: 仮想環境が存在しない場合は、先に作成してください：
```batch
python -m venv venv
venv\Scripts\activate.bat
```

#### ステップ3: 必要なライブラリをインストール
```batch
pip install -r requirements.txt
```

#### ステップ4: サーバーを起動
```batch
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## 確認方法

### 仮想環境がアクティベートされているか確認

コマンドプロンプトの先頭に `(venv)` が表示されていれば、仮想環境がアクティベートされています。

```
(venv) C:\Users\...\backend>
```

### FastAPIがインストールされているか確認

```batch
python -c "import fastapi; print(fastapi.__version__)"
```

正常にインストールされていれば、バージョン番号が表示されます。

## トラブルシューティング

### 仮想環境が見つからない

```batch
python -m venv venv
venv\Scripts\activate.bat
pip install -r requirements.txt
```

### pipが最新でない

```batch
python -m pip install --upgrade pip
pip install -r requirements.txt
```

### ポート8000が既に使用されている

別のポートを使用する場合：
```batch
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8001
```

または、既存のプロセスを停止してください。

## 正常に起動した場合

以下のメッセージが表示されれば、サーバーが正常に起動しています：

```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [xxxxx] using WatchFiles
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

サーバーURL:
- サーバー: http://localhost:8000
- API ドキュメント: http://localhost:8000/docs
- 代替API ドキュメント: http://localhost:8000/redoc
